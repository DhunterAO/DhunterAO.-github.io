---
title: 面向数字货币与区块链的密码新技术研讨会记录
date: 2017-11-19 17:14:34
tags:
  - 区块链
  - 密码
  - 会议记录

categories: 技术
---
会议整体感受
--
学术会议主要讨论分享的是研究方向和现在的进展，能了解到现在有哪些研究方向，每个方向有哪些黑盒子，黑盒子用到了哪些工具来构建。而要了解具体黑盒子的原理操作还需要自己阅读论文。

本次会议主要是讨论数字货币与区块链中密码的新技术，但是很多密码学原理其实并不是很新，只是一些新的应用。

最大收获的一句话大意是：密码技术从传统金融电子货币系统中的保证性功能到了现在数字货币系统中的核心性功能。

意思就是在以前的电子货币系统中，所有数据就是直接传输的，如果大家都是诚实的用户，那么是不需要密码技术来保证安全，而现在的数字货币，如果没有对数据做签名等密码学操作，那么支付这样的核心操作都是不能成功的。

会议具体内容
--
### 法定数字货币与密码应用探讨
报告者从官方角度出发，提出法定货币对安全性的要求。民间货币比如比特币向法定数字货币转变是一个趋势。由央行推出法定数字货币。
三种模式：
1. 中心化程度最高的模式：央行建立大账户，管理所有的数字货币与账户，其他银行从央行获取数据并提交到央行。优点：高度集中，安全可信。缺点：央行成为交易瓶颈。
2. 中心化程度次之的模式：央行-商业银行二元发行：央行和商业银行都可以发行同一种货币，都拥有铸币权和登记权。优点：性能提升，增加去中心化程度。缺点：增加同步开销。
3. 中心化程度最低的模式：所有银行发行自己的数字货币进行竞争。优点：货币竞争市场选择最好的货币。缺点：金融风险较大，币值容易动荡。

电子货币的新特性：易复制、不排他、易转移  
因此带来的问题：制造假币、双花问题、所有权证明  
产生的需求：防伪、防双花、匿名、可审计

一个电子货币的完整流通过程：铸币->发行->交易->回笼

比特币特点：去中心化、区块链、POW、交易延迟高、密钥丢失不可找回、弱匿名(假名)。  
英国法定数字货币：中心化发行、二元层次、两级区块链。
http://yuanchuang.caijing.com.cn/2017/0609/4282977.shtml
https://eprint.iacr.org/2015/502.pdf  
顺便可以对比一下其他国家的法定数字货币。

对密码的挑战：  
核心安全能力->核心业务能力  
电子化货币->密码货币  

比特币用到的密码学技术：哈希、数字签名  
零币用到的密码学性质：匿名性、防双花、隐藏

法定数字货币->加密货币->算法货币->智能货币  
&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;技术&emsp;&emsp;&emsp;实践&emsp;&emsp;&emsp;应用

研究路径：理论与实践结合  
&emsp;&emsp;内涵->业务模型->安全模型->基础理论->算法理论

挑战1：形式化表达与可控发行问题  
&emsp;&emsp;要求：客观可调控、形式化表达、体系适用  
挑战2：资产确权，安全转移  
&emsp;&emsp;要求：持有需登记。可流通，不可双花，不可抵赖，可离线交易  
挑战3：隐私和监管  
&emsp;&emsp;要求：身份、内容、行为都要可匿名且可追溯  
挑战4：规模、效率、扩展性、体系性冲击

关键密码技术  
&emsp;&emsp;形式表达：多中心动态群组管理技术，安全多方计算，同态加密  
&emsp;&emsp;确权：非负证明技术，零知识证明  
&emsp;&emsp;授权可撤销，可控匿名：门罗币，盲签名，群签名，环签名，关联环签名  
&emsp;&emsp;抗量子攻击：抗量子密码


### 密码货币的系统安全问题研究
1. 形式化表示：去中心化，发行  
&emsp;&emsp;密码货币的生命周期：设计->实现->挖矿->后挖矿(激励全是矿工费的时候)  
&emsp;&emsp;密码货币系统-六维模型：网络、共识、激励、应用、数据、时间  
&emsp;&emsp;交易过程的形式化表达  

2. 安全挑战  
&emsp;&emsp;钱包安全，弱认证，开源代码，密码算法  
&emsp;&emsp;以太坊多签名钱包漏洞  

3. 系统安全性分析  
&emsp;&emsp;可用性：备份、共识、接力  
&emsp;&emsp;完整性：签名验证、链式结构、冗余结构  
&emsp;&emsp;协议安全：51%算力攻击，POS共识，区块分叉攻击  
&emsp;&emsp;使用安全：私钥托管，口令钱包，密钥丢失  
&emsp;&emsp;实现安全：开源代码审计，DAO漏洞，以太坊多重签名漏洞，随机数漏洞  
&emsp;&emsp;综合安全：系统级别调用

4. 应对方法  
&emsp;&emsp;抗量子密码算法：格  
&emsp;&emsp;POW中防ASIC的杂凑，更有效安全的算法  
&emsp;&emsp;牺牲完备性，保证安全性  
&emsp;&emsp;端信息跳变(主动防御)，拟态防御，动态异构冗余，掩盖漏洞

### 区块链与社会化可信协作
中钞BROP Blockchain Registry Open Platform
1. 信任与协作  
&emsp;&emsp;人与人之间的信任与协作，邓巴数。  
&emsp;&emsp;协作的基础是信任，信任是一种概率，基础是确定性承诺

2. BROP构造协作
&emsp;&emsp;时间、数据、身份、凭证。对现实资产锚定  
&emsp;&emsp;记录可信->时间可信->身份可信->行为可信->关系可信->互助协作  
&emsp;&emsp;区块链防篡改 标准时间戳 公私钥对 私钥签名&emsp;智能合约&emsp;DAPP  
&emsp;&emsp;平台化，使得应用更简单  
&emsp;&emsp;建立信任，使得协作更简单
3. BROP生态  
&emsp;&emsp;运营方监控，开发者开发应用中间件，应用通过区块链浏览器，用户使用BROP钱包  
&emsp;&emsp;存在性、完整性、身份、时间、数据关系、凭证  
&emsp;&emsp;网络：记账节点->代理节点->普通节点->中间件->用户  
&emsp;&emsp;应用：电子合同存证，溯源，可信摇号，公益捐款，区块链锚定资产，政府机关跨部门协作，网贷黑名单，银行间征信协作(带授权的单向哈希匹配算法，脱敏ID)  
&emsp;&emsp;展望：共享／隐私折中，分片扩容，更多c端应用，跨链应用，链上链下

### 区块链结构及其稳定性
比特币：有限匿名(假名)，铸币、发行去中心化  
面临攻击：51%，自私挖矿，多方自私挖矿，绝对收益下降，矿池卧底，相互攻击导致囚徒困境，[avoid dilemma 改进](https://arxiv.org/abs/1708.09790)（[汉化](http://www.btc38.com/btc/altgeneral/12496.html)），雇佣军策略  
矿产枯竭后，[Carlsten模拟](https://www.cs.princeton.edu/~smattw/CKWN-CCS16.pdf)，打包竞争。

### Monero中密码累加器应用&零知识证明在数字货币的应用
理想数字货币：去中心化、安全、保护隐私  
保护交易隐私：保护Payer、Payee、TxAmount
难度：保护隐私的同时如何让矿工验证，去中心化的Rage Proof。
* 保护Payer：linkable ring signature
* 保护Payee：每次生成新账户收款
* 保护Amount：承诺代替价格，非负零知识证明
用密码累加器做零知识证明(感觉很像单向陷门函数，但是任何可验证计算都可以做零知识证明) 证明自己持有一个累加器中的值并用于承诺  

承诺->挑战->相应  sigma protocol  
应用的协议[RingCT](https://eprint.iacr.org/2015/1098.pdf)、[RingCT2.0](https://eprint.iacr.org/2017/921.pdf)  
2.0存在问题：Setup密码参数并不去中心化

### [基于区块链的可搜索对称加密](https://arxiv.org/pdf/1711.01030.pdf)
云计算、服务计算、云存储中的数据泄漏问题  
解决：数据加密存储，搜索加密后数据->可搜索加密  
利用区块链技术构造新的可搜索加密模型(SSE-using-BC)  
建立索引  
搜索任务发布，完成任务获取报酬

### 电子现金的发展与没落
完全盲签名(完美犯罪)->限制性盲签名->公平盲签名->部分盲签名->群盲签名
电子现金系统流程：注册->取款->支付->存款(回笼)  
Ecash from Digicash  
这个报告后面关于比特币的部分还是按照电子现金的想法完全瞎扯，可见对于一个新事物，并不是有相关经验的人更快接受，而一张白纸更快吸收。

### 实用格基签名
ECC of Bitcoin容易遭受量子攻击，但是还可能坚持20～30年，因为量子计算机还是模型，但也可能突飞猛进  
hash能抗量子攻击，只会变成亚指数时间，但是signature不抗量子攻击。  
攻击：[Grover算法](https://en.wikipedia.org/wiki/Grover%27s_algorithm)  
抗量子密码有基于hash等等，主要是基于格(Lattice-based)  
希望产生新的diffie hellman体系  
NewHop Frodo RLWE-based LWE-based

### 密码学在区块链中应用与工程化(矩阵元，[BCOS开源](https://github.com/bcosorg/bcos))
1. 区块链定义，分类(聚焦联盟链)
2. 密码学技术、网络、共识
3. 联盟链：可管可控可追踪
  1. 可控匿名
  2. 隐私保护
  3. 合法监督
  4. 私钥管理
4. 身份隐私 VS 国家监管
  1. 前台自愿、后台实名
  2. 匿名用群签名，群管理可以监管
  3. 密文交易，实名认证
5. 交易隐私 VS 记账验证
  1. 加法同态加密(保护金额隐私)，零知识证明
6. 数据隐私 VS 数据归集(大数据分析)
  1. 安全多方计算MPC
  2. 分布式密钥托管与密钥恢复
  3. 征信等数据分析
  4. 私钥管理，硬件保存

公有链，ZeroCash，只有UTXO模型，不支持智能合约  
建立余额模型，支持智能合约  
未来展望：两方->多方计算，抗量子攻击

### 区块链国产密码应用实践
[Hyperledger Fabric](https://hyperledger-fabric.readthedocs.io/en/release/)  
1. Membership Service
2. Blockchain Service
3. Chaincode Service

共识节点、背书节点、提交节点  

[BCCSP](https://github.com/hyperledger/fabric/blob/release/bccsp/bccsp.go)，密码学组件  

硬件：身份认证、密钥管理、高速密码卡、高速加密网关

### 区块链与隐私
1. 含义、使用意义  
  - CIA：
    - 机密：非授权第三方不能分析交易双方信息，细节，与现实对应；抗删除，抗篡改，民主随机，可信，抗抵赖
    - 可用：高负荷，抗攻击
    - 完整：抗删除，抗篡改
  - 隐私保护
    - BTC、ETH：假名，IP可追踪
  - 应用
    - 追溯食品安全
2. 密码技术
  - 非对称加密
  - 对称加密
  - 数字签名
  - 哈希
  - 同态加密
  - 算术电路
  - 环签名
  - 群签名
  - 匿名凭证
  - 零知识证明
- 门罗币
  - CroptoNote Monero with RingCT(2.0)
- 联盟链 折中
  - 已有项目的融合 门罗币+以太坊
  - 效率考虑

### 开放环境中的POS区块链协议
> 对标POW安全性

POW安全问题：
  - 用户全网连接，防止隔断攻击、算力劫持
  - 诚实用户算力占优
  - 出块速度有限，速度快了就会导致分叉
  - 开放网络环境，用户自由进出
  - P2P网络共识效率低

Stake：用户持有资源
  - 中心化用户注册
  - Stake分配：拜占庭协议／MPC：效率低、扩展性差
  - 选取代表
  - 理想Beason随机数生成
  - [algorand算法](https://people.csail.mit.edu/nickolai/papers/gilad-algorand-eprint.pdf)
  - [Ouroboros](https://eprint.iacr.org/2016/889.pdf)

POS面临问题：
  - 攻击者生成区块很容易
  - 贪心生长
  - 适应性身份注册


### 智能合约开发与未来
#### 智能合约
1. 定义：运行在区块链上的程序，由区块链一致性保证运行结果正确
2. 示例：以太坊DAPP
3. 构架：软件+硬件+分布式网络
4. 需求：友好、安全、隐私、易用
5. 接口：[web3.js](https://github.com/ethereum/web3.js/)

#### 应用安全
1. 智能硬件：汽车安全，钱包安全
2. 智能合约：The DAO
3. 代码安全：审计，测试，ether、gas等复杂元素，逻辑错误、异常
4. 安全测试工具：OYENTE

#### 应用示例
1. [Virtue Poker](https://virtue.poker/)：p2p网络扑克游戏
  - 优点：无押金，无内部人员。加密算法去中心化洗牌
  - 缺点：存储空间有限，gas消耗
- [IPFS系统](https://ipfs.io/)：P2P网络
  - BitSwap协议
  - Merkle Graph

会后个人总结
--
- 比特币系统(还包括衍生出来的区块链技术等密码学技术)是一个庞大的系统，研究需要从一个点切入，树状程度散开。
- 密码学技术是基础，必须先熟练掌握哈希，签名(各种签名)等基础技术，才能了解不同的协议如何运行。
- 在国内搞研究还是应该偏向联盟链和私有链，为国家、大银行等提供技术服务，对标法定数字货币。
- 自己研究一段时间，对各种技术有自己的认识之后再参加类似会议会有更大收获。
